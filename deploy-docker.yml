---
- hosts: dev
  become: True
  tasks:
   - name: Install docker
     apt: 
       name: docker.io
       state: present
   - name: Install python3 
     apt:
       name: python3
       state: present
   - name: Start docker
     service:
       name: docker
       state: started
       enabled: yes
   - name: Install docker-py python module
     pip: 
       name: docker-py
       state: present
   - name: Start container
     docker_container:
       name: webapp
       image: "nkasperskyi/webapp:v1.0"
       state: started
       published_ports:
         - 0.0.0.0:8080:8080